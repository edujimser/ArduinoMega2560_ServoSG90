; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed, and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit the documentation for other options and examples:
; https://docs.platformio.org/page/projectconf.html

;----------------------------------------------------------------------------------------------------------------------------------------------------------------
;------ Project Configuration ------
[env:megaatmega2560]
platform = atmelavr
board = megaatmega2560
framework = arduino
upload_protocol = wiring     ; Use the 'wiring' protocol for uploading, which is compatible with the Arduino Mega   
upload_port = COM3           ; Port where your board is connected (e.g., COM3 on Windows, /dev/ttyUSB0 on Linux/Mac)
monitor_port = COM3          ; Must match the physical port of your board (same as debug_port normally)
                             ; To check the port in CMD: connect and disconnect the board, then run `mode` in CMD
;----------------------------------------------------------------------------------------------------------------------------------------------------------------
;------ Standard dependencies and extra configurations ------
; Adapting the C++ version for the project: removing GNU++11 standard to insert GNU++17
; https://docs.platformio.org/en/latest/projectconf/advanced_scripting.html#build-unflags-and-build-flags
build_unflags = 
    -std=gnu++11              ; Remove the C++11 standard to avoid conflicts with the C++17 standard
build_flags = 
    -std=gnu++17              ; Use the C++17 standard with GNU extensions (more flexible than the pure standard)
    -DAVR8_UART_NUMBER=3      ; Define a macro to indicate that UART number 3 will be used on AVR microcontrollers
    -DEBUG_MODE=0             ; Activate debug mode to include debugging code
    -Os                       ; Change the optimization level here:
                                ; -O0  → no optimization (debugging)
                                ; -O1  → light optimization
                                ; -O2  → balanced optimization
                                ; -O3  → maximum speed
                                ; -Os  → optimize for size
    -flto                     ; Enable Link Time Optimization (LTO) for better optimization across files
    -fno-exceptions           ; Disable exceptions to reduce code size and improve performance
    -I include
lib_deps = 
    arduino-libraries/Servo
;----------------------------------------------------------------------------------------------------------------------------------------------------------------
;------ Artificial Debugging Dependencies ------
; Notes:
;   - Configure build_flags (DAVR8_UART_NUMBER, DEBUG_MODE) to activate debug mode
; Activate simulated debugging system with avr-stub
debug_tool = avr-stub         ; Uses the 'avr-debugger' library to simulate debugging on AVR chips
; Virtual serial port for debugging
debug_port = COM6             ; Port where your board is connected (e.g., COM3 on Windows, /dev/ttyUSB0 on Linux/Mac)
                             ; To check the port in CMD: connect and disconnect the board, then run `mode` in CMD
; Serial monitor communication speed
monitor_speed = 57600         ; Baud rate. Must match the one used in Serial.begin() in your code
[platformio]